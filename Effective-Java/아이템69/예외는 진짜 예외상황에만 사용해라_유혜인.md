# ì˜ˆì™¸ëŠ”Â ì§„ì§œÂ ì˜ˆì™¸Â ìƒí™©ì—ë§ŒÂ ì‚¬ìš©í•˜ë¼

1. ì˜ˆì™¸ëŠ” ì˜ˆì™¸ ìƒí™©ì— ì“¸ ìš©ë„ë¡œ ì„¤ê³„ë˜ì—ˆê¸°ì—, êµ¬í˜„ì ì…ì¥ì—ì„œ ìµœì í™”ì— ë³„ ì‹ ê²½ì„ ì•ˆì“°ê²Œ ëœë‹¤.
2. try-catch ë¸”ë¡ì— ë„£ìœ¼ë©´ JVMì´ ì ìš©í•  ìˆ˜ ìˆëŠ” ìµœì í™”ê°€ ì œí•œëœë‹¤. (ì†ë„ ì €í•˜)
3. foreachë¬¸ ê°™ì€ ë°°ì—´ ìˆœíšŒëŠ” JVMì´ ì•Œì•„ì„œ ìµœì í™”í•´ì¤Œ 

try-catch ë¸”ë¡ ì•ˆì— ë°˜ë³µë¬¸ì„ ë„£ëŠ” ê²ƒê³¼ ê°™ì€ ë°©ì‹ì€ ì„±ëŠ¥ì´ ë–¨ì–´ì§€ëŠ” ê²ƒì€ ë¬¼ë¡ , ì—‰ëš±í•œ ê³³ì—ì„œ ë²„ê·¸ë¥¼ ìˆ¨ê¸°ë‹ˆ ì§€ì–‘í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ 

ì¦‰, ì˜ˆì™¸ëŠ” ì˜¤ì§ ì˜ˆì™¸ ìƒí™©ì—ì„œë§Œ ì“°ê³  ì¼ìƒì  ì œì–´ íë¦„ìš©ìœ¼ë¡œ ì“°ì§€ ë§ì•„ì•¼ í•œë‹¤.

- ìƒíƒœ ì˜ì¡´ì  ë©”ì†Œë“œë¥¼ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤ëŠ” ìƒíƒœ ê²€ì‚¬ ë©”ì†Œë“œë„ í•¨ê»˜ ì œê³µí•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

ex) Iteratorì˜ next(), hasNext() 

- ì•„ë‹ˆë©´ optional í˜¹ì€ íŠ¹ì • ê°’(null)ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
    
    ê·¸ëŸ¬ë‚˜, null ê°’ì€ NPEë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆì–´ ì§€ì–‘í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
    
    [https://slenderankle.tistory.com/249](https://slenderankle.tistory.com/249)   â†’ Null pointerë¥¼ ë§‰ëŠ” ë°©ë²•ë„ ì•Œì•„ë‘ì!
    

---

## Optional

ìë°” 8 ì „ì— ë©”ì„œë“œê°€ íŠ¹ì • ì¡°ê±´ì—ì„œ ê°’ì„ ë°˜í™˜í•  ìˆ˜ ì—†ì„ ë•Œ ì·¨í•  ìˆ˜ ìˆëŠ” ì„ íƒì§€ëŠ” 2ê°€ì§€ì˜€ë‹¤.

1. Exception throw
    
    ë‹¨, ìœ„ì—ì„œ ë§í–ˆë“¯ ì˜ˆì™¸ëŠ” ë°˜ë“œì‹œ ì˜ˆì™¸ìƒí™©ì—ë§Œ ì¨ì•¼ í•œë‹¤.
    
    ì˜ˆì™¸ëŠ” ì‹¤í–‰ ìŠ¤íƒì„ ì¶”ì í•´ì„œ ë¹„ìš©ì´ ë¹„ì‹¸ë‹¤
    
2. null return
    
    null ë¦¬í„´ì‹œì—ëŠ” NPEë¥¼ í•­ìƒ ì¡°ì‹¬í•´ì•¼ í•œë‹¤.
    

<aside>
ğŸ’¡ ê°’ì´ ìˆì„ ìˆ˜ë„ ìˆê³  ì—†ì„ ìˆ˜ë„ ìˆëŠ” ê°ì²´ optionalì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.

</aside>

- ì°¸ì¡° íƒ€ì…ì˜ ê°ì²´ë¥¼ í•œë²ˆ ê°ì‹¼ ì¼ì¢…ì˜ wrapper í´ë˜ìŠ¤ì´ë‹¤.
- ì›ì†Œë¥¼ ìµœëŒ€ 1ê°œ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ë¶ˆë³€ collection ì´ë‹¤.
- ì´ì „ë³´ë‹¤ null-safeí•œ ë¡œì§ ì²˜ë¦¬ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤.

| ë©”ì„œë“œ | ì„¤ëª… |
| --- | --- |
| Optional.ofNullable(T value) | valueê°€ nullì´ë©´, empty Optionalì„ ë°˜í™˜í•˜ê³ , ê°’ì´ ìˆìœ¼ë©´ Optional.ofë¡œ ìƒì„± |
| Optional.of(T value) | ë‚´ë¶€ ê°’ì´ valueì¸ Optional ê°ì²´ ë°˜í™˜, nullì´ë©´ NPE ë°œìƒ |
| OptionalÂ map(Funtion<? super T, ? extends U> f) | Optional ë‚´ë¶€ì˜ ê°’ì„ Functionì„ í†µí•´ ê°€ê³µ |
| T get() | Optional ë‚´ì˜ ê°’ì„ ë°˜í™˜í•˜ë‚˜, nullì¸ ê²½ìš° NoSuchElementException ë°œìƒ |

â€¦ ì´ì™¸ì—ë„ ë§ì€ ë©”ì„œë“œ ì œê³µ â†’ [https://jaehun2841.github.io/2019/02/24/effective-java-item55/#Optional-ë©”ì„œë“œ](https://jaehun2841.github.io/2019/02/24/effective-java-item55/#Optional-%EB%A9%94%EC%84%9C%EB%93%9C) 

### ìë°” 8 ì´ì „

```jsx
public class School {
    private ClassRoom classRoom;
}

public class ClassRoom {
    private Teacher teacher;
    private List<Student> students;
}

public class Teacher {
    private Subject subject;
    private String name;
}

public class Subject {
    private String subjectName;
}

// ì—¬ê¸°ì„œ ì´ í•™êµì˜ êµì‹¤ì˜ ì„ ìƒë‹˜ì˜ ê³¼ëª© ë°˜í™˜ ì½”ë“œë¥¼ ìƒì„±í•˜ë ¤ë©´?
school.getClassRoom().getTeacher().getSubject().getSubjectName();

// ë³´ê¸°ë„ ì•ˆì¢‹ê³ , NULL-safe í•˜ì§€ ì•Šë‹¤.

// ì´ê±¸ NULL-safe í•˜ê²Œ í•˜ë ¤ë©´ ë¬´í•œ if ì§€ì˜¥ì— ë¹ ì§„ë‹¤.
if(school == null) {
    return null;
}

ClassRoom classRoom = school.getClassRoom();
if(classRoom == null) {
    return null;
}

Teacher teacher = classRoom.getTeacher();
if(teacher == null) {
    return null;
}

Subject subject = teacher.getSubject();
if(subject == null) {
    return null;
}

return subject.getSubjectName();

// ìœ„ì˜ ë°©ì‹ë„ ì© ì¢‹ì§„ ì•Šë‹¤.
```

### ìë°” 8 ì´í›„ (optional ì‚¬ìš©)

```jsx
Optional.ofNullable(school).map(School::getClassRoom)    //Optional<School>
                           .map(ClassRoom::getTeacher)   //Optional<ClassRoom>
                           .map(Teacher::getSubject)     //Optional<Teacher>
                           .map(Subject::getSubjectName) //Optional<Subject>
                           .orElse(null);  // ê°’oì´ë©´ ê·¸ ê°’ ë°˜í™˜, nullì´ë©´ other ë°˜í™˜
```

### ì™œ optional ì¸ê°€?

1. ê¸°ë³¸ê°’ì„ ì •í•´ë‘˜ ìˆ˜ ìˆë‹¤.
    
    orElse(ê¸°ë³¸ê°’) ìœ¼ë¡œ NPE ì˜ˆì™¸ ìƒì„±ì„ ë§‰ì„ ìˆ˜ ìˆë‹¤.
    
2. ì›í•˜ëŠ” ì˜ˆì™¸ë¥¼ ë˜ì§ˆ ìˆ˜ ìˆë‹¤.
    
    ```java
    Toy myToy = max(toys).orElseThrow(TemperTantrumException::new);
    ```
    
    ê°’ì´ ì—†ëŠ” ê²½ìš° ì›í•˜ëŠ” ì˜ˆì™¸ë¥¼ ë˜ì§ˆ ìˆ˜ ìˆë‹¤.
    

1. í•­ìƒ ê°’ì´ ì±„ì›Œì ¸ ìˆëŠ” ê²½ìš°
    
    ê°’ì´ ì—†ìœ¼ë©´ NoSuchElementExceptionì´ ë°œìƒ
    
2. ê¸°ë³¸ê°’ì„ ì„¤ì •í•˜ëŠ” ë¹„ìš©ì´ í° ê²½ìš° : orElseGet ì‚¬ìš©

ì°¸ê³  ìë£Œ : [https://jaehun2841.github.io/2019/02/24/effective-java-item55/#Optional-ì´ë€](https://jaehun2841.github.io/2019/02/24/effective-java-item55/#Optional-%EC%9D%B4%EB%9E%80)